package org.SeleniumWebTable.WebTable.testing;

import java.time.Duration;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.Select;

public class PaginationWebTableDemo {

	@SuppressWarnings("null")
	public static void main(String[] args) throws InterruptedException {

		WebDriver driver = new ChromeDriver();

		driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(1));

		driver.get("https://blazedemo.com/");

		driver.manage().window().maximize();

		Thread.sleep(1000);

		driver.findElement(By.xpath("//Select[@name=\"fromPort\"]")).click();

		WebElement Dep = driver.findElement(By.xpath("//Select[@name=\"fromPort\"]"));

		Select departure = new Select(Dep);

		departure.selectByVisibleText("Boston");

		driver.findElement(By.xpath("//Select[@name=\"toPort\"]")).click();

		WebElement Des = driver.findElement(By.xpath("//Select[@name=\"toPort\"]"));

		Select destination = new Select(Des);

		destination.selectByVisibleText("London");

		driver.findElement(By.xpath("//input[@type=\"submit\"]")).click();

		ArrayList<String> PriceList = new ArrayList<String>();

		int PriceSize = driver.findElements(By.xpath("//table[@class=\"table\"]//tr")).size();

		System.out.println(PriceSize);

		int ColSize = driver.findElements(By.xpath("//table[@class=\"table\"]//td[6]")).size();

		for (int i = 1; i <= ColSize; i++) {

			String FlightPrice = driver
					.findElement(By.xpath("//table[@class=\"table\"]//tr[" + i + "]//td[" + PriceSize + "]")).getText();

			PriceList.add(FlightPrice);
		}

		Collections.sort(PriceList);
		
		String LowestPrice = PriceList.get(0);

		System.out.println(PriceList);
		
		for (int i = 1; i <= ColSize; i++) {

			String FlightPrice = driver
					.findElement(By.xpath("//table[@class=\"table\"]//tr[" + i + "]//td[" + PriceSize + "]")).getText();
			
			WebElement Element = driver
					.findElement(By.xpath("//table[@class=\"table\"]//tr[" + i + "]//td[" + PriceSize + "]"));
			
			if (FlightPrice==LowestPrice) {
				Element.click();
			}
		}

		driver.quit();
	}
}
